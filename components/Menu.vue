<template>
  <nav
    class="flex flex-row items-center px-6 py-4 text-white shadow-lg bg-emerald-600"
  >
    <nuxt-link to="/" class="flex font-bold text-white uppercase">
<svg height="32" viewBox="0 0 421 76" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M105.324 55.9091L94.3466 41.4205H92.4375V55.9091H84V21H92.4375V34.5511H93.7841L104.591 21H115.142L101.693 37.483L115.841 55.9091H105.324Z" fill="white"/>
<path d="M129.222 56.4034C126.472 56.4034 124.108 55.8409 122.131 54.7159C120.165 53.5795 118.648 52 117.58 49.9773C116.523 47.9432 115.994 45.5852 115.994 42.9034C115.994 40.2102 116.523 37.8523 117.58 35.8295C118.648 33.7955 120.165 32.2159 122.131 31.0909C124.108 29.9545 126.472 29.3864 129.222 29.3864C131.972 29.3864 134.33 29.9545 136.295 31.0909C138.273 32.2159 139.79 33.7955 140.847 35.8295C141.915 37.8523 142.449 40.2102 142.449 42.9034C142.449 45.5852 141.915 47.9432 140.847 49.9773C139.79 52 138.273 53.5795 136.295 54.7159C134.33 55.8409 131.972 56.4034 129.222 56.4034ZM129.273 50.1136C130.273 50.1136 131.119 49.8068 131.812 49.1932C132.506 48.5795 133.034 47.7273 133.398 46.6364C133.773 45.5455 133.96 44.2841 133.96 42.8523C133.96 41.3977 133.773 40.125 133.398 39.0341C133.034 37.9432 132.506 37.0909 131.812 36.4773C131.119 35.8636 130.273 35.5568 129.273 35.5568C128.239 35.5568 127.364 35.8636 126.648 36.4773C125.943 37.0909 125.403 37.9432 125.028 39.0341C124.665 40.125 124.483 41.3977 124.483 42.8523C124.483 44.2841 124.665 45.5455 125.028 46.6364C125.403 47.7273 125.943 48.5795 126.648 49.1932C127.364 49.8068 128.239 50.1136 129.273 50.1136Z" fill="white"/>
<path d="M165.179 39.5625V45.9205H151.747V39.5625H165.179ZM154.611 29.7273V55.9091H146.719V29.7273H154.611ZM170.207 29.7273V55.9091H162.366V29.7273H170.207Z" fill="white"/>
<path d="M187.487 56.4034C184.726 56.4034 182.357 55.8352 180.379 54.6989C178.413 53.5625 176.902 51.983 175.845 49.9602C174.788 47.9261 174.26 45.5739 174.26 42.9034C174.26 40.2216 174.788 37.8693 175.845 35.8466C176.913 33.8125 178.43 32.2273 180.396 31.0909C182.374 29.9545 184.732 29.3864 187.47 29.3864C189.891 29.3864 191.999 29.8239 193.794 30.6989C195.601 31.5739 197.01 32.8125 198.021 34.4148C199.044 36.0057 199.584 37.875 199.641 40.0227H191.851C191.692 38.6818 191.237 37.6307 190.487 36.8693C189.749 36.108 188.783 35.7273 187.589 35.7273C186.624 35.7273 185.777 36 185.05 36.5455C184.322 37.0795 183.754 37.875 183.345 38.9318C182.947 39.9773 182.749 41.2727 182.749 42.8182C182.749 44.3636 182.947 45.6705 183.345 46.7386C183.754 47.7955 184.322 48.5966 185.05 49.142C185.777 49.6761 186.624 49.9432 187.589 49.9432C188.362 49.9432 189.044 49.7784 189.635 49.4489C190.237 49.1193 190.732 48.6364 191.118 48C191.504 47.3523 191.749 46.5682 191.851 45.6477H199.641C199.561 47.8068 199.021 49.6932 198.021 51.3068C197.033 52.9205 195.641 54.1761 193.845 55.0739C192.061 55.9602 189.942 56.4034 187.487 56.4034Z" fill="white"/>
<path d="M209.003 65.7273C208.003 65.7273 207.06 65.6477 206.173 65.4886C205.287 65.3409 204.526 65.142 203.889 64.892L205.73 58.8409C206.548 59.1136 207.287 59.2727 207.946 59.3182C208.616 59.3636 209.19 59.2557 209.668 58.9943C210.156 58.7443 210.531 58.2955 210.793 57.6477L211.116 56.8636L201.81 29.7273H210.537L215.361 48.4091H215.634L220.526 29.7273H229.304L219.435 58.4148C218.957 59.8466 218.281 61.108 217.406 62.1989C216.543 63.3011 215.423 64.1648 214.048 64.7898C212.685 65.4148 211.003 65.7273 209.003 65.7273Z" fill="white"/>
<path d="M229.112 55.9091L229.061 49.483H229.896C230.464 49.483 230.959 49.3352 231.379 49.0398C231.8 48.7443 232.152 48.2727 232.436 47.625C232.72 46.9659 232.947 46.1193 233.118 45.0852C233.288 44.0511 233.396 42.7955 233.442 41.3182L233.868 29.7273H254.595V55.9091H246.703V36.1023H241.283L240.874 43.6364C240.771 45.8523 240.482 47.7443 240.004 49.3125C239.538 50.8693 238.902 52.1307 238.095 53.0966C237.3 54.0625 236.357 54.7727 235.266 55.2273C234.175 55.6818 232.942 55.9091 231.567 55.9091H229.112Z" fill="white"/>
<path d="M264.58 37.2955H272.523C276.125 37.2955 278.949 38.142 280.994 39.8352C283.04 41.517 284.068 43.8011 284.08 46.6875C284.068 48.5625 283.597 50.1932 282.665 51.5795C281.744 52.9545 280.42 54.0227 278.693 54.7841C276.977 55.5341 274.92 55.9091 272.523 55.9091H259.688V29.7273H267.58V49.5341H272.523C273.614 49.5341 274.511 49.267 275.216 48.733C275.92 48.1989 276.278 47.5114 276.29 46.6705C276.278 45.7841 275.92 45.0625 275.216 44.5057C274.511 43.9489 273.614 43.6705 272.523 43.6705H264.58V37.2955Z" fill="white"/>
<path d="M284.42 36.1023V29.7273H308.966V36.1023H300.597V55.9091H292.688V36.1023H284.42Z" fill="white"/>
<path d="M319.521 56.3523C317.851 56.3523 316.368 56.0739 315.072 55.517C313.788 54.9489 312.771 54.0966 312.021 52.9602C311.283 51.8125 310.913 50.375 310.913 48.6477C310.913 47.1932 311.169 45.9659 311.68 44.9659C312.192 43.9659 312.896 43.1534 313.794 42.5284C314.692 41.9034 315.726 41.4318 316.896 41.1136C318.067 40.7841 319.317 40.5625 320.646 40.4489C322.135 40.3125 323.334 40.1705 324.243 40.0227C325.152 39.8636 325.811 39.642 326.22 39.358C326.641 39.0625 326.851 38.6477 326.851 38.1136V38.0284C326.851 37.1534 326.55 36.4773 325.947 36C325.345 35.5227 324.533 35.2841 323.51 35.2841C322.408 35.2841 321.521 35.5227 320.851 36C320.18 36.4773 319.754 37.1364 319.572 37.9773L311.885 37.7045C312.112 36.1136 312.697 34.6932 313.641 33.4432C314.595 32.1818 315.902 31.1932 317.561 30.4773C319.232 29.75 321.237 29.3864 323.578 29.3864C325.249 29.3864 326.788 29.5852 328.197 29.983C329.607 30.3693 330.834 30.9375 331.879 31.6875C332.925 32.4261 333.732 33.3352 334.3 34.4148C334.879 35.4943 335.169 36.7273 335.169 38.1136V55.9091H327.328V52.2614H327.124C326.658 53.1477 326.061 53.8977 325.334 54.5114C324.618 55.125 323.771 55.5852 322.794 55.892C321.828 56.1989 320.737 56.3523 319.521 56.3523ZM322.095 50.8977C322.993 50.8977 323.8 50.7159 324.516 50.3523C325.243 49.9886 325.822 49.4886 326.254 48.8523C326.686 48.2045 326.902 47.4545 326.902 46.6023V44.1136C326.663 44.2386 326.374 44.3523 326.033 44.4545C325.703 44.5568 325.339 44.6534 324.942 44.7443C324.544 44.8352 324.135 44.9148 323.714 44.983C323.294 45.0511 322.891 45.1136 322.504 45.1705C321.72 45.2955 321.05 45.4886 320.493 45.75C319.947 46.0114 319.527 46.3523 319.232 46.7727C318.947 47.1818 318.805 47.6705 318.805 48.2386C318.805 49.1023 319.112 49.7614 319.726 50.2159C320.351 50.6705 321.141 50.8977 322.095 50.8977Z" fill="white"/>
<path d="M358.726 39.5625V45.9205H345.294V39.5625H358.726ZM348.158 29.7273V55.9091H340.266V29.7273H348.158ZM363.754 29.7273V55.9091H355.913V29.7273H363.754Z" fill="white"/>
<path d="M366.499 36.1023V29.7273H391.044V36.1023H382.675V55.9091H374.766V36.1023H366.499Z" fill="white"/>
<path d="M405.132 54.1705V29.4886H412.001V54.1705H405.132ZM396.217 45.2727V38.4034H420.899V45.2727H396.217Z" fill="white"/>
<path d="M32.7218 19V0H19.0855C16.9155 0 14.8344 0.857906 13.3 2.38499C11.7656 3.91207 10.9036 5.98324 10.9036 8.14286V57C10.9036 59.1596 11.7656 61.2308 13.3 62.7579C14.8344 64.285 16.9155 65.1429 19.0855 65.1429H51.8182C53.9881 65.1429 56.0692 64.285 57.6036 62.7579C59.138 61.2308 60 59.1596 60 57V27.1429H40.8982C38.7282 27.1429 36.6472 26.285 35.1128 24.7579C33.5784 23.2308 32.7164 21.1596 32.7164 19H32.7218ZM38.1764 19V1.35714L58.6309 21.7143H40.9036C40.1803 21.7143 39.4866 21.4283 38.9752 20.9193C38.4637 20.4103 38.1764 19.7199 38.1764 19ZM0 16.2857C0 14.846 0.574673 13.4652 1.5976 12.4471C2.62052 11.4291 4.00791 10.8571 5.45455 10.8571V57C5.45455 60.5994 6.89123 64.0513 9.44854 66.5964C12.0059 69.1416 15.4743 70.5714 19.0909 70.5714H49.0909C49.0909 72.0112 48.5162 73.3919 47.4933 74.41C46.4704 75.4281 45.083 76 43.6364 76H19.3964C14.2521 76 9.31859 73.9662 5.68106 70.346C2.04354 66.7258 0 61.8157 0 56.696V16.2857Z" fill="white"/>
</svg>
    </nuxt-link>
    <div class="flex flex-row items-center gap-1 ml-auto font-semibold">
      <template v-for="item in items" :key="item.name">
        <nuxt-link
          v-if="show(item)"
          class="px-4 py-2 text-lg rounded-md hover:bg-emerald-100/30"
          :to="item.link"
          >{{ item.name }}</nuxt-link
        >
      </template>
      <template v-if="show({ auth: true })">
        <nuxt-link
          class="px-4 py-2 text-lg rounded-md hover:bg-emerald-100/30"
          to="/auth/logout"
          >{{ user.email }}
        </nuxt-link>
      </template>
      <template v-else>
        <nuxt-link
          class="px-4 py-2 text-lg rounded-md hover:bg-emerald-100/30"
          to="/auth/login"
          >Авторизация</nuxt-link
        >
      </template>
    </div>
  </nav>
</template>

<script setup>
const user = useSupabaseUser();
const items = [
  {
    name: 'Главная страница',
    link: '/',
    auth: false,
  },
  {
    name: 'Панель пользователя',
    link: '/panel',
    auth: true,
  },
];
const show = (item) => {
  if (item.auth) {
    if (user.value) {
      return true;
    }
    return false;
  }

  return true;
};
</script>
